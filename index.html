<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HelloGame - 免费在线HTML5游戏</title>
    <meta name="description" content="HelloGame是一个提供免费在线HTML5游戏的平台，包括动作、益智、策略等多种类型游戏。">
    <link rel="stylesheet" href="public/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="preload" href="public/js/game-loader.js" as="script">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
</head>
<body>
    <header class="site-header">
        <div class="header-container">
            <a href="index.html" class="logo">
                <img src="public/images/logo.png" alt="HelloGame" class="lazy">
                <span>HelloGame</span>
            </a>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html" class="active">首页</a></li>
                    <li><a href="category.html?category=热门">热门游戏</a></li>
                    <li><a href="category.html?category=新游戏">新游戏</a></li>
                    <li><a href="category.html?category=推荐">推荐</a></li>
                </ul>
            </nav>
            <div class="header-actions">
                <div class="search-box">
                    <input type="text" placeholder="搜索游戏...">
                    <button type="button"><i class="fas fa-search"></i></button>
                </div>
                <div class="language-selector">
                    <button type="button" class="lang-btn">
                        <i class="fas fa-globe"></i>
                        <span>中文</span>
                    </button>
                    <div class="language-dropdown">
                        <a href="#" data-lang="zh">中文</a>
                        <a href="#" data-lang="en">English</a>
                    </div>
                </div>
                <button type="button" class="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </header>

    <main>
        <section class="hero-section">
            <div class="hero-content">
                <h1>探索数千款免费在线游戏</h1>
                <p>从动作冒险到益智游戏，HelloGame为您提供各种类型的免费游戏体验。无需下载，即点即玩！</p>
                <div class="hero-buttons">
                    <a href="category.html?category=热门" class="btn primary">浏览热门游戏</a>
                    <a href="category.html?category=新游戏" class="btn secondary">查看新游戏</a>
                </div>
            </div>
            <div class="hero-image">
                <img data-src="public/images/hero-image.jpg" alt="游戏精选" class="lazy">
            </div>
        </section>

        <section class="categories-nav">
            <div class="container">
                <a href="category.html?category=动作">动作游戏</a>
                <a href="category.html?category=益智">益智游戏</a>
                <a href="category.html?category=策略">策略游戏</a>
                <a href="category.html?category=射击">射击游戏</a>
                <a href="category.html?category=冒险">冒险游戏</a>
                <a href="category.html?category=休闲">休闲游戏</a>
                <a href="category.html?category=模拟">模拟游戏</a>
                <a href="category.html?category=多人">多人游戏</a>
            </div>
        </section>

        <section class="featured-games">
            <div class="container">
                <div class="section-header">
                    <h2>精选游戏</h2>
                    <a href="category.html?category=精选" class="view-all">查看全部 <i class="fas fa-arrow-right"></i></a>
                </div>
                <div class="games-grid" id="featured-games">
                    <!-- 游戏卡片将在这里动态加载 -->
                    <div class="games-loading">
                        <div class="spinner"></div>
                        <p>加载中...</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="original-games">
            <div class="container">
                <div class="section-header">
                    <h2>HelloGame原创</h2>
                    <a href="category.html?category=原创" class="view-all">查看全部 <i class="fas fa-arrow-right"></i></a>
                </div>
                <div class="original-games-grid">
                    <div class="original-game-card large">
                        <a href="game.html?id=snake">
                            <div class="original-game-img">
                                <img data-src="public/images/games/snake.jpg" alt="贪吃蛇" class="lazy">
                            </div>
                            <div class="original-game-info">
                                <h3>贪吃蛇</h3>
                                <p>经典的贪吃蛇游戏，控制蛇吃食物并不断成长，但要避免撞到墙壁或自己的身体！</p>
                                <div class="game-meta">
                                    <span class="game-category">休闲</span>
                                    <span class="game-rating">4.5 ⭐</span>
                                </div>
                                <button class="btn primary">立即游玩</button>
                            </div>
                        </a>
                    </div>
                    <div class="original-game-card">
                        <a href="game.html?id=spaceshooter">
                            <div class="original-game-img">
                                <img data-src="public/images/games/spaceshooter.jpg" alt="太空射击" class="lazy">
                            </div>
                            <div class="original-game-info">
                                <h3>太空射击</h3>
                                <p>控制宇宙飞船击败外星入侵者！</p>
                                <div class="game-meta">
                                    <span class="game-category">射击</span>
                                    <span class="game-rating">4.7 ⭐</span>
                                </div>
                            </div>
                        </a>
                    </div>
                    <div class="original-game-card">
                        <a href="game.html?id=2048">
                            <div class="original-game-img">
                                <img data-src="public/images/games/2048.jpg" alt="2048" class="lazy">
                            </div>
                            <div class="original-game-info">
                                <h3>2048</h3>
                                <p>通过合并相同数字的方块来获得2048。</p>
                                <div class="game-meta">
                                    <span class="game-category">益智</span>
                                    <span class="game-rating">4.8 ⭐</span>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <section class="popular-games">
            <div class="container">
                <div class="section-header">
                    <h2>热门游戏</h2>
                    <a href="category.html?category=热门" class="view-all">查看全部 <i class="fas fa-arrow-right"></i></a>
                </div>
                <div class="games-grid" id="popular-games">
                    <!-- 游戏卡片将在这里动态加载 -->
                    <div class="games-loading">
                        <div class="spinner"></div>
                        <p>加载中...</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="new-games">
            <div class="container">
                <div class="section-header">
                    <h2>新游戏</h2>
                    <a href="category.html?category=新游戏" class="view-all">查看全部 <i class="fas fa-arrow-right"></i></a>
                </div>
                <div class="games-grid" id="new-games">
                    <!-- 游戏卡片将在这里动态加载 -->
                    <div class="games-loading">
                        <div class="spinner"></div>
                        <p>加载中...</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="about-section">
            <div class="container">
                <div class="about-content">
                    <h2>关于 HelloGame</h2>
                    <p>HelloGame 是一个专注于 HTML5 游戏的在线平台，提供各种类型的免费游戏。我们致力于为玩家提供高质量、无需下载的游戏体验，让您随时随地都能享受游戏的乐趣。</p>
                    <p>无论您是休闲玩家还是硬核游戏爱好者，HelloGame 都能满足您的需求。我们的游戏库不断更新，为您带来最新最好玩的游戏。</p>
                    <p>如果您是游戏开发者，欢迎将您的作品提交到我们的平台，与全球玩家分享您的创意！</p>
                    <a href="#" class="btn secondary">了解更多</a>
                </div>
                <div class="about-image">
                    <img data-src="public/images/about-image.jpg" alt="关于 HelloGame" class="lazy">
                </div>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <div class="footer-container">
            <div class="footer-column">
                <h3>关于我们</h3>
                <ul>
                    <li><a href="#">关于 HelloGame</a></li>
                    <li><a href="#">联系我们</a></li>
                    <li><a href="#">加入我们</a></li>
                    <li><a href="#">博客</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>支持</h3>
                <ul>
                    <li><a href="#">常见问题</a></li>
                    <li><a href="#">开发者支持</a></li>
                    <li><a href="#">问题反馈</a></li>
                    <li><a href="#">隐私政策</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>开发者</h3>
                <ul>
                    <li><a href="#">提交游戏</a></li>
                    <li><a href="#">开发者工具</a></li>
                    <li><a href="#">API文档</a></li>
                    <li><a href="#">成功案例</a></li>
                </ul>
            </div>
            <div class="footer-column social">
                <h3>关注我们</h3>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                    <a href="#"><i class="fab fa-discord"></i></a>
                </div>
                <p>订阅我们的邮件，获取最新游戏资讯</p>
                <div class="subscribe-form">
                    <input type="email" placeholder="您的邮箱地址">
                    <button type="button">订阅</button>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2023 HelloGame. 保留所有权利。</p>
            <ul class="footer-links">
                <li><a href="#">服务条款</a></li>
                <li><a href="#">隐私政策</a></li>
                <li><a href="#">Cookie政策</a></li>
            </ul>
        </div>
    </footer>

    <script src="public/js/main.js"></script>
    <script>
        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 加载游戏数据
            loadGames('featured-games', 'featured', 6);
            loadGames('popular-games', 'popular', 6);
            loadGames('new-games', 'new', 6);
            
            // 初始化懒加载
            initLazyLoading();
            
            // 初始化语言选择器
            initLanguageSelector();
            
            // 初始化主题切换
            initThemeToggle();
        });
        
        // 懒加载图片
        function initLazyLoading() {
            const lazyImages = document.querySelectorAll('img.lazy');
            
            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver(function(entries, observer) {
                    entries.forEach(function(entry) {
                        if (entry.isIntersecting) {
                            const image = entry.target;
                            image.src = image.dataset.src;
                            image.classList.remove('lazy');
                            imageObserver.unobserve(image);
                        }
                    });
                });
                
                lazyImages.forEach(function(image) {
                    imageObserver.observe(image);
                });
            } else {
                // 降级处理
                lazyImages.forEach(function(image) {
                    image.src = image.dataset.src;
                    image.classList.remove('lazy');
                });
            }
        }
        
        // 加载游戏数据
        function loadGames(containerId, category, limit) {
            const container = document.getElementById(containerId);
            
            // 模拟API请求延迟
            setTimeout(() => {
                // 此处应该是真实的API请求
                const games = getGamesData(category, limit);
                
                // 清空加载指示器
                container.innerHTML = '';
                
                // 添加游戏卡片
                games.forEach(game => {
                    const gameCard = createGameCard(game);
                    container.appendChild(gameCard);
                });
            }, 1000);
        }
        
        // 创建游戏卡片
        function createGameCard(game) {
            const card = document.createElement('div');
            card.className = 'game-card';
            
            card.innerHTML = `
                <a href="game.html?id=${game.id}">
                    <div class="game-img">
                        <img data-src="${game.image}" alt="${game.title}" class="lazy">
                    </div>
                    <div class="game-info">
                        <h3>${game.title}</h3>
                        <div class="game-meta">
                            <span class="game-category">${game.category}</span>
                            <span class="game-rating">${game.rating} ⭐</span>
                        </div>
                    </div>
                </a>
            `;
            
            // 初始化新添加的懒加载图片
            const lazyImage = card.querySelector('img.lazy');
            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver(function(entries, observer) {
                    entries.forEach(function(entry) {
                        if (entry.isIntersecting) {
                            lazyImage.src = lazyImage.dataset.src;
                            lazyImage.classList.remove('lazy');
                            imageObserver.unobserve(lazyImage);
                        }
                    });
                });
                
                imageObserver.observe(lazyImage);
            } else {
                lazyImage.src = lazyImage.dataset.src;
                lazyImage.classList.remove('lazy');
            }
            
            return card;
        }
        
        // 模拟游戏数据
        function getGamesData(category, limit) {
            // 在实际应用中，这应该是从API获取的数据
            const games = [
                {
                    id: 'tetris',
                    title: '俄罗斯方块',
                    category: '益智',
                    rating: 4.9,
                    image: 'public/images/games/tetris.jpg'
                },
                {
                    id: 'snake',
                    title: '贪吃蛇',
                    category: '休闲',
                    rating: 4.5,
                    image: 'public/images/games/snake.jpg'
                },
                {
                    id: 'spaceshooter',
                    title: '太空射击',
                    category: '射击',
                    rating: 4.7,
                    image: 'public/images/games/spaceshooter.jpg'
                },
                {
                    id: '2048',
                    title: '2048',
                    category: '益智',
                    rating: 4.8,
                    image: 'public/images/games/2048.jpg'
                },
                {
                    id: 'flappybird',
                    title: '像素鸟',
                    category: '休闲',
                    rating: 4.6,
                    image: 'public/images/games/flappybird.jpg'
                },
                {
                    id: 'breakout',
                    title: '打砖块',
                    category: '休闲',
                    rating: 4.4,
                    image: 'public/images/games/breakout.jpg'
                }
            ];
            
            // 根据分类筛选游戏
            let filtered = games;
            if (category === 'featured') {
                filtered = games.filter(game => game.rating >= 4.7);
            } else if (category === 'popular') {
                filtered = games.sort((a, b) => b.rating - a.rating);
            } else if (category === 'new') {
                filtered = [...games].reverse();
            }
            
            // 限制返回数量
            return filtered.slice(0, limit);
        }
        
        // 初始化语言选择器
        function initLanguageSelector() {
            const langBtn = document.querySelector('.lang-btn');
            const langDropdown = document.querySelector('.language-dropdown');
            
            langBtn.addEventListener('click', function() {
                langDropdown.classList.toggle('active');
            });
            
            // 点击外部关闭下拉菜单
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.language-selector')) {
                    langDropdown.classList.remove('active');
                }
            });
            
            // 切换语言
            const langLinks = document.querySelectorAll('.language-dropdown a');
            langLinks.forEach(link => {
                link.addEventListener('click', function(event) {
                    event.preventDefault();
                    const lang = this.dataset.lang;
                    document.documentElement.lang = lang;
                    langBtn.querySelector('span').textContent = this.textContent;
                    langDropdown.classList.remove('active');
                    // 在实际应用中，这里应该调用翻译函数
                });
            });
        }
        
        // 初始化主题切换
        function initThemeToggle() {
            const themeToggle = document.querySelector('.theme-toggle');
            const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
            
            // 检查本地存储中的主题设置
            const currentTheme = localStorage.getItem('theme');
            if (currentTheme === 'dark') {
                document.body.classList.add('dark-theme');
                themeToggle.querySelector('i').classList.replace('fa-moon', 'fa-sun');
            } else if (currentTheme === 'light') {
                document.body.classList.remove('dark-theme');
                themeToggle.querySelector('i').classList.replace('fa-sun', 'fa-moon');
            } else {
                // 根据系统设置决定主题
                if (prefersDarkScheme.matches) {
                    document.body.classList.add('dark-theme');
                    themeToggle.querySelector('i').classList.replace('fa-moon', 'fa-sun');
                }
            }
            
            themeToggle.addEventListener('click', function() {
                const icon = this.querySelector('i');
                
                if (document.body.classList.contains('dark-theme')) {
                    document.body.classList.remove('dark-theme');
                    icon.classList.replace('fa-sun', 'fa-moon');
                    localStorage.setItem('theme', 'light');
                } else {
                    document.body.classList.add('dark-theme');
                    icon.classList.replace('fa-moon', 'fa-sun');
                    localStorage.setItem('theme', 'dark');
                }
            });
        }
    </script>
</body>
</html> 